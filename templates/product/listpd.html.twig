{% extends 'base2.html.twig' %}

{% block body %}
  <table class="table" border = "3">
    <thead>
      <tr>
        <th scope="col">Name</th>
        <th scope="col">Price</th>
        <th scope="col">Type</th>
        <th scope="col">Stock</th>
        <th scope="col">Shop</th>
        <th scope="col">Product</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
      {% for i in products %}
        <tr>
          <td>{{i.name}}</td>
          <td>{{i.price}}Dt</td>
          <td>{{i.type}}</td>
           {% if i.stock != 0 %}
             <td>{{ i.stock }}</td>
                  {% else %}
            <td>Out of stock</td>
          {% endif %}
          {% if i.shop is not null %}
             <td>{{ i.shop.name }}</td>
                  {% else %}
            <td>No boutique associated</td>
          {% endif %}
          <td><img src="{{ (asset('upload/'~ i.photo)) }}" alt="LOGO" width="80" height="80"> </td>
          <td>
            <a href="{{ path('updateP', {'id': i.id}) }}" class="btn btn-primary">Update</a>
            <form method="post" action="{{ path('deleteP', {'id': i.id}) }}">
              <input type="hidden" name="_method" value="DELETE">
              <button type="submit" class="btn btn-danger">Delete</button>
              <input type="hidden" name="_token" value="{{ csrf_token('deleteP') }}">
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <button class="btn btn-success">
    <a href="{{ path('affichePP') }}" style="color: #ffffff;">Add Product</a>
  </button>

  {% if isPaginated %}     

 <div class="row">  
    <nav aria-label="col Page navigation example">
    <ul class="pagination">
     {% if page != 1 %}
    <li class="page-item"><a class="page-link" href="{{path('affichePd', {page: page -1, nbre: nbre})}}">Previous</a></li>
    {% endif %}
     {% for i in range(1,nbrePage) %}
    <li class="page-item"><a class="page-link" href="{{path('affichePd', {page: i, nbre: nbre})}}">{{i}}</a></li>
     {% endfor %}
     {% if page != nbrePage %}
    <li class="page-item"><a class="page-link" href="{{path('affichePd', {page: page +1, nbre: nbre})}}">Next</a></li>
    {% endif %}
    
  </ul>
</nav>  
</div>
{% endif %}


{% endblock %}

{% block stylesheets %}
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    th, td {
      border: 1px solid #dddddd;
      padding: 8px;
      text-align: left;
    }

    th {
      background-color: #dddddd;
    }

    .add-button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 5px;
    }
  </style>
{% endblock %}